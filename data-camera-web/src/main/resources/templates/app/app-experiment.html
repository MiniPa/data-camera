<html lang="en" xmlns:th="http://www.thymeleaf.org">

<body>
    <div th:fragment="app-experiment">
        <div class="row">
            <!-- 页面说明 -->
            <div class="app-page-introduction">
                <p>
                    <i class="fa fa-info-circle"></i>&nbsp;在实验模式中，你能够随时监控传感器的数据，并且根据你的需要录制数据，录制的数据会被保存，你可以在“数据分析模式”下分析这些数据。
                </p>
                <p><i class="fa fa-info-circle"></i>&nbsp;点击“监控”按钮，让数据动起来，此时传感器数据会被保存到数据库中；点击“录制”按钮，录制并保存你想要的实验数据</p>
            </div>

            <!-- 实验操作按钮 -->
            <div class="col-xs-12 col-sm-12 col-md-12">
                <div class="app-exp-button-group">
                    <button class="btn btn-success" data-toggle="modal" data-target="#exp-modal" todo="new">添加一个实验</button>
                </div>
            </div>

            <div class="col-sm-12">
                <th:block th:if="${#lists.isEmpty(experiments)}">
                    <hr/>
                    <h3>TIPS: 应用下还没有实验哦，点击“添加一个实验”新建一个吧:)</h3>
                    <hr/>
                </th:block>
                <!-- 遍历构造实验tab -->
                <th:block th:each="experiment,index:${experiments}">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <div class="panel-title">
                                <strong th:text="|实验：${experiment.name}|">
                                </strong>
                                <button class="btn pull-right label label-danger" th:data="${experiment.id}" onclick="deleteExp(this)">x</button>
                                <button class="btn pull-right label label-warning" th:data="${experiment.id}"
                                        data-toggle="modal" data-target="#exp-modal" todo="edit"
                                        style="margin-right: 10px">+</button>
                            </div>
                        </div>
                        <div class="panel-body">
                            <th:block th:each="track,index:${experiment.trackInfoList}">
                                <div class="app-exp-track-container">
                                    <div class="row">
                                        <div class="col-xs-8 col-sm-8 col-md-8">
                                            <div th:id="|experiment-track-${experiment.id}-${track.id}|" class="app-exp-track-chart">
                                                轨迹加载中，请稍后
                                            </div>
                                        </div>
                                        <div class="col-xs-4 col-sm-4 col-md-4">
                                            <div class="app-exp-track-statistics">
                                                <div class="title">
                                                    <span th:text="|轨迹${track.id}-统计信息|"></span>
                                                    <button class="btn pull-right label label-danger" th:data="${track.id}" onclick="deleteTrack(this)">x</button>
                                                </div>
                                                <div class="content">
                                                    <div class="content-title">绑定的设备：
                                                        <a href="#" th:id="|track-bound-${track.id}|" data-type="select" data-title="绑定设备"></a>
                                                    </div>
                                                    <div th:if="${track.sensor ne null and track.sensor.sensorConfig.type eq 1}">
                                                        <div class="content-title">最大值: <strong class="content-text">-</strong></div>
                                                        <div class="content-title">最小值: <strong class="content-text">-</strong></div>
                                                        <div class="content-title">平均值: <strong class="content-text">-</strong></div>
                                                    </div>
                                                    <div th:if="${track.sensor ne null and track.sensor.sensorConfig.type eq 2}">
                                                        <div class="content-title">录制状态: <strong class="content-text">-</strong></div>
                                                        <div class="content-title">开始录制时间: <strong class="content-text">-</strong></div>
                                                        <div class="content-title">结束录制时间: <strong class="content-text">-</strong></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </th:block>
                            <th:block th:if="${not #lists.isEmpty(experiment.trackInfoList)}">
                                <div class="row">
                                    <div class="recorder-button">
                                        <button class="btn btn-warning" th:data="${experiment.id}" onclick="monitor(this)">开始监控</button>
                                        <button class="btn btn-danger" th:data="${experiment.id}" onclick="recorder(this)">开始录制</button>
                                    </div>
                                </div>
                            </th:block>
                        </div>
                    </div>
                </th:block>
            </div>
        </div>

        <div th:include="module/common::sub-footer"></div>
    </div>
</body>

</html>